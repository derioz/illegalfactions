(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70260,e=>{"use strict";e.s(["COLLECTIONS",0,{FACTIONS:"factions",LORE:"lore",MEMBERS:"members",GALLERY:"gallery",CLIPS:"clips",UPDATES:"updates",USERS:"users"}])},48268,e=>{"use strict";var t=e.i(43476),s=e.i(71645),i=e.i(46932);e.i(36180);var a=e.i(98925),c=e.i(59141),l=e.i(70260),d=e.i(94690),n=e.i(77117);function r(){let{userRole:e}=(0,d.useAuth)(),[r,o]=(0,s.useState)([]),[m,x]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[p,f]=(0,s.useState)({uid:"",email:"",isSuperAdmin:!1,factionIds:[]}),b=e?.isSuperAdmin||!1;(0,s.useEffect)(()=>{g()},[]);let g=async()=>{let e=(0,c.getFirebaseDb)();if(e){try{let t=await (0,a.getDocs)((0,a.collection)(e,l.COLLECTIONS.USERS));o(t.docs.map(e=>({id:e.id,...e.data()})))}catch(e){console.error("Error loading users:",e)}x(!1)}},j=async()=>{let e=(0,c.getFirebaseDb)();e&&p.uid&&(await (0,a.setDoc)((0,a.doc)(e,l.COLLECTIONS.USERS,p.uid),{email:p.email,isSuperAdmin:p.isSuperAdmin,factionIds:p.factionIds,createdAt:new Date,lastLoginAt:new Date}),h(!1),f({uid:"",email:"",isSuperAdmin:!1,factionIds:[]}),g())};return b?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.motion.h1,{className:"text-3xl font-bold text-white mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:"User Management"}),(0,t.jsx)(i.motion.p,{className:"text-[var(--foreground-muted)]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:"Manage user roles and faction access"})]}),(0,t.jsx)("button",{onClick:()=>h(!u),className:"btn-cinematic",children:u?"Cancel":"+ Add User"})]}),u&&(0,t.jsxs)(i.motion.div,{className:"glass-card p-6 mb-8 max-w-2xl",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Add User Role"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Firebase UID"}),(0,t.jsx)("input",{type:"text",placeholder:"Get from Firebase Console â†’ Authentication",value:p.uid,onChange:e=>f({...p,uid:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Email"}),(0,t.jsx)("input",{type:"email",placeholder:"user@example.com",value:p.email,onChange:e=>f({...p,email:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-white",children:[(0,t.jsx)("input",{type:"checkbox",checked:p.isSuperAdmin,onChange:e=>f({...p,isSuperAdmin:e.target.checked})}),"Super Admin (can edit all factions)"]}),!p.isSuperAdmin&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Faction Access"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:n.factions.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-[var(--foreground-muted)]",children:[(0,t.jsx)("input",{type:"checkbox",checked:p.factionIds.includes(e.id),onChange:t=>{t.target.checked?f({...p,factionIds:[...p.factionIds,e.id]}):f({...p,factionIds:p.factionIds.filter(t=>t!==e.id)})}}),e.name]},e.id))})]}),(0,t.jsx)("button",{onClick:j,className:"btn-cinematic",children:"Save User"})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:m?(0,t.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Loading users..."}):0===r.length?(0,t.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"No users configured yet."}):r.map(e=>(0,t.jsx)("div",{className:"glass-card p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold",children:e.email?.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-white font-semibold",children:e.email}),(0,t.jsx)("p",{className:"text-sm text-[var(--foreground-muted)]",children:e.isSuperAdmin?"Super Admin":`Access to ${e.factionIds?.length||0} factions`})]})]}),e.isSuperAdmin&&(0,t.jsx)("span",{className:"px-2 py-1 bg-red-500/20 text-red-400 text-xs rounded",children:"Super Admin"})]})},e.id))})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Super Admin privileges required."})]})}e.s(["default",()=>r])}]);