(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94690,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(51718);var r=e.i(18357);e.i(36180);var i=e.i(98925),a=e.i(59141);let n=(0,s.createContext)(void 0);function l({children:e}){let[l,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(null),[h,u]=(0,s.useState)(!0),[m,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,a.getFirebaseAuth)();if(!e)return void u(!1);let t=(0,r.onAuthStateChanged)(e,async e=>{if(o(e),e){let t=(0,a.getFirebaseDb)();if(t)try{let s=await (0,i.getDoc)((0,i.doc)(t,"users",e.uid));if(s.exists()){let e=s.data();c({isSuperAdmin:e.isSuperAdmin||!1,factionIds:e.factionIds||[]})}else await (0,i.setDoc)((0,i.doc)(t,"users",e.uid),{email:e.email,displayName:e.displayName,isSuperAdmin:!1,factionIds:[],createdAt:new Date,lastLoginAt:new Date}),c({isSuperAdmin:!1,factionIds:[]})}catch(e){console.error("Error fetching user role:",e),c({isSuperAdmin:!1,factionIds:[]})}}else c(null);u(!1)});return()=>t()},[]);let f=async()=>{let e=(0,a.getFirebaseAuth)();if(!e)return void x("Authentication not available");x(null);try{let t=new r.GoogleAuthProvider;await (0,r.signInWithPopup)(e,t)}catch(e){throw x(e instanceof Error?e.message:"Failed to sign in"),e}},v=async()=>{let e=(0,a.getFirebaseAuth)();if(e)try{await (0,r.signOut)(e),c(null)}catch(e){x(e instanceof Error?e.message:"Failed to sign out")}};return(0,t.jsx)(n.Provider,{value:{user:l,userRole:d,loading:h,signInWithGoogle:f,signOut:v,error:m},children:e})}function o(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}e.s(["AuthProvider",()=>l,"useAuth",()=>o])},18566,(e,t,s)=>{t.exports=e.r(76562)},88760,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),i=e.i(22016),a=e.i(46932),n=e.i(94690),l=e.i(77117);function o({children:e}){let{user:a,userRole:o,loading:h}=(0,n.useAuth)(),u=(0,r.useRouter)(),m=(0,r.usePathname)();if((0,s.useEffect)(()=>{h||a||m?.startsWith("/admin/login")||u.push("/admin/login")},[a,h,u,m]),m?.startsWith("/admin/login"))return(0,t.jsx)(t.Fragment,{children:e});if(h)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[var(--background)]",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-red-600 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Loading..."})]})});if(!a)return null;let x=o?.isSuperAdmin||!1;return(0,t.jsxs)("div",{className:"min-h-screen bg-[var(--background)] flex",children:[(0,t.jsxs)("aside",{className:"w-64 bg-[var(--background-secondary)] border-r border-white/5 flex flex-col fixed h-screen",children:[(0,t.jsx)("div",{className:"p-6 border-b border-white/5",children:(0,t.jsxs)(i.default,{href:"/admin",className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-black text-lg",children:"IF"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-lg font-bold text-white",children:"Admin"}),x&&(0,t.jsx)("span",{className:"block text-xs text-red-400",children:"Super Admin"})]})]})}),(0,t.jsxs)("nav",{className:"flex-1 p-4 overflow-y-auto",children:[(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsx)(d,{href:"/admin",icon:"dashboard",active:"/admin"===m,children:"Dashboard"})}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h3",{className:"px-3 text-[10px] font-semibold text-neutral-500 uppercase tracking-widest mb-3",children:"All Factions"}),(0,t.jsx)("div",{className:"space-y-0.5 max-h-[50vh] overflow-y-auto pr-1",children:l.factions.map(e=>(0,t.jsx)(d,{href:`/admin/faction/${e.id}`,icon:"faction",active:m===`/admin/faction/${e.id}`,color:e.primaryColor,children:e.name},e.id))})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h3",{className:"px-3 text-[10px] font-semibold text-neutral-500 uppercase tracking-widest mb-3",children:"System"}),(0,t.jsxs)("div",{className:"space-y-0.5",children:[x&&(0,t.jsx)(d,{href:"/admin/users",icon:"users",active:"/admin/users"===m,children:"User Management"}),(0,t.jsx)(d,{href:"/admin/settings",icon:"settings",active:"/admin/settings"===m,children:"Settings"})]})]})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-white/5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white text-sm font-bold",children:a.email?.charAt(0).toUpperCase()})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("p",{className:"text-sm font-medium text-white truncate",children:a.email})})]}),(0,t.jsx)(c,{})]})]}),(0,t.jsx)("main",{className:"flex-1 ml-64",children:(0,t.jsx)("div",{className:"p-8",children:e})})]})}function d({href:e,icon:s,active:r,color:n,children:l}){let o={dashboard:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),faction:(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n||"var(--accent-primary)"}}),users:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),settings:(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})};return(0,t.jsx)(i.default,{href:e,children:(0,t.jsxs)(a.motion.div,{className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${r?"bg-white/10 text-white":"text-[var(--foreground-muted)] hover:text-white hover:bg-white/5"}`,whileHover:{x:4},whileTap:{scale:.98},children:[o[s],(0,t.jsx)("span",{className:"text-sm font-medium truncate",children:l})]})})}function c(){let{signOut:e}=(0,n.useAuth)(),s=(0,r.useRouter)(),i=async()=>{await e(),s.push("/admin/login")};return(0,t.jsxs)(a.motion.button,{onClick:i,className:"w-full mt-2 px-3 py-2 rounded-lg text-sm font-medium text-[var(--foreground-muted)] hover:text-white hover:bg-white/5 transition-colors flex items-center gap-3",whileHover:{x:4},whileTap:{scale:.98},children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})}function h({children:e}){return(0,t.jsx)(n.AuthProvider,{children:(0,t.jsx)(o,{children:e})})}e.s(["default",()=>h])}]);